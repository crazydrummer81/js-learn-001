(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{27:function(e,t,a){e.exports=a(55)},36:function(e,t,a){},40:function(e,t,a){},42:function(e,t,a){},44:function(e,t,a){},46:function(e,t,a){},48:function(e,t,a){},53:function(e,t,a){},55:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(19),c=a.n(l),s=a(3),i=a(4),o=a(6),u=a(5),m=a(7),h=a(57),d=a(58),p=a(59),f=a(60),v=a(12),g=a(13);function E(){var e=Object(v.a)(["\n    display: flex;\n    margin: 0;\n    align-items: center;\n    color: #fff;\n    list-style-type: none;\n    li {\n        margin-right: 20px;\n        font-size: 18px;\n    }\n"]);return E=function(){return e},e}function b(){var e=Object(v.a)(["\n    font-size: 24px;\n    color: #fff;\n    margin: 0;\n"]);return b=function(){return e},e}function y(){var e=Object(v.a)(["\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    height: 80px;\n"]);return y=function(){return e},e}var j=g.a.div(y()),k=g.a.h3(b()),C=g.a.ul(E()),O=function(){return r.a.createElement(j,null,r.a.createElement(k,null,r.a.createElement("a",{href:"#"},"Game of Thrones DB")),r.a.createElement(C,null,r.a.createElement("li",null,r.a.createElement("a",{href:"#"},"Characters")),r.a.createElement("li",null,r.a.createElement("a",{href:"#"},"Houses")),r.a.createElement("li",null,r.a.createElement("a",{href:"#"},"Books"))))},w=(a(36),a(26)),N=a(11),x=a.n(N),I=a(14),S=function(){function e(){Object(s.a)(this,e),this._apiBase="https://anapioficeandfire.com/api"}return Object(i.a)(e,[{key:"getResource",value:function(){var e=Object(I.a)(x.a.mark(function e(t){var a;return x.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(this._apiBase+t);case 2:if((a=e.sent).ok){e.next=5;break}throw new Error("Could not fetch ".concat(t,", recieved ").concat(a.status));case 5:return e.next=7,a.json();case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"getAllCharacters",value:function(){var e=Object(I.a)(x.a.mark(function e(){var t;return x.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getResource("/characters?page=5&pageSize=10");case 2:return t=e.sent,e.abrupt("return",t.map(this._transformCharacter));case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"getCharacter",value:function(){var e=Object(I.a)(x.a.mark(function e(t){var a;return x.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getResource("/characters/".concat(t));case 2:return a=e.sent,e.abrupt("return",this._transformCharacter(Object(w.a)({},a,{id:t})));case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"_transformCharacter",value:function(e){return{name:e.name||"\u043d\u0435\u0438\u0437\u0432\u0435\u0441\u0442\u043d\u043e",gender:e.gender||"\u043d\u0435\u0438\u0437\u0432\u0435\u0441\u0442\u043d\u043e",born:e.born||"\u043d\u0435\u0438\u0437\u0432\u0435\u0441\u0442\u043d\u043e",died:e.died||"\u043d\u0435\u0438\u0437\u0432\u0435\u0441\u0442\u043d\u043e",culture:e.culture||"\u043d\u0435\u0438\u0437\u0432\u0435\u0441\u0442\u043d\u043e",id:e.id}}},{key:"_transformHouse",value:function(e){return{name:e.name,region:e.region,words:e.words,titles:e.titles,overlord:e.overlord,ancestralWeapons:e.ancestralWeapons}}},{key:"_transformBook",value:function(e){return{name:e.name,numberOfPages:e.numberOfPages,publiser:e.publiser,released:e.released}}}]),e}(),M=(a(40),function(e){function t(){return Object(s.a)(this,t),Object(o.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e={width:this.props.value+"%"};return r.a.createElement("div",{className:"m2progress-bar"},r.a.createElement("div",{className:"m2progress-bar__fill",style:e}))}}]),t}(n.Component)),_=(a(42),function(){return r.a.createElement("div",{className:"overlay"},r.a.createElement("div",{className:"loadingio-spinner-eclipse-eylva7iuthl"},r.a.createElement("div",{className:"ldio-49ixr0y1dox"},r.a.createElement("div",null))))});a(44);function B(){return(B=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}var A=r.a.createElement("g",{id:"color"},r.a.createElement("path",{fill:"#FCEA2B",d:"M36,13.1161c-12.6823,0-23,10.3177-23,23c0,12.6822,10.3177,23,23,23c12.6822,0,23-10.3178,23-23 C59,23.4338,48.6822,13.1161,36,13.1161z"})),L=r.a.createElement("g",{id:"hair"}),D=r.a.createElement("g",{id:"skin"}),W=r.a.createElement("g",{id:"skin-shadow"}),P=r.a.createElement("g",{id:"line"},r.a.createElement("circle",{cx:36,cy:36,r:23,fill:"none",stroke:"#000000",strokeMiterlimit:10,strokeWidth:2}),r.a.createElement("path",{fill:"none",stroke:"#000000",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:10,strokeWidth:2,d:"M26.5,44.1262c1.8768-1.5425,5.8239-2.494,10-2.4149c3.8343,0.0726,7.2926,1.0032,9,2.4149"}),r.a.createElement("path",{fill:"none",stroke:"#000000",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:10,strokeWidth:2,d:"M21.5,27c1.1854-2.4206,3-5,9-4"}),r.a.createElement("path",{fill:"none",stroke:"#000000",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:10,strokeWidth:2,d:"M50.5,27c-1.1854-2.4206-3-5-9-4"}),r.a.createElement("path",{d:"M30,31c0,1.6568-1.3448,3-3,3c-1.6553,0-3-1.3433-3-3c0-1.6552,1.3447-3,3-3C28.6552,28,30,29.3448,30,31"}),r.a.createElement("path",{d:"M48,31c0,1.6568-1.3447,3-3,3s-3-1.3433-3-3c0-1.6552,1.3447-3,3-3S48,29.3448,48,31"})),R=function(e){return r.a.createElement("svg",B({id:"emoji",viewBox:"0 0 72 72"},e),A,L,D,W,P)},z=(a.p,function(e){function t(){return Object(s.a)(this,t),Object(o.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props.message;return r.a.createElement("div",{className:"overlay"},r.a.createElement("div",{className:"error-message"},r.a.createElement(R,null),r.a.createElement("span",{className:"error-message__heding"},"\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a..."),r.a.createElement("span",{className:"error-message__content"},e)))}}]),t}(n.Component)),F=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(o.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={char:{},progress:0,loading:!0,error:!1,errorMessage:""},a.interval=1500,a.gotService=new S,a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.updateChar(),this.intervalId=setInterval(function(){e.updateChar()},this.interval)}},{key:"componentWillUnmount",value:function(){clearInterval(this.intervalId),clearInterval(this.progressIntervalId)}},{key:"onCharLoaded",value:function(e){this.setState({char:e,loading:!1,error:!1,errorMessage:""}),this.initProgressBar()}},{key:"onError",value:function(e){this.setState({error:!0,loading:!1,errorMessage:e.message})}},{key:"updateChar",value:function(){var e=this;clearInterval(this.progressIntervalId),this.setState({loading:!0,progress:0});var t=Math.floor(140*Math.random()+25);this.gotService.getCharacter(t).then(function(t){e.onCharLoaded(t)}).catch(function(t){return e.onError(t)})}},{key:"initProgressBar",value:function(){var e=this;this.setState({progress:0});var t=Math.floor(this.interval/100);this.progressIntervalId=setInterval(function(){e.setState({progress:e.state.progress+1}),e.state.progress>=100&&clearInterval(e.progressIntervalId)},t)}},{key:"render",value:function(){var e=this.state,t=e.char,a=e.loading,n=e.progress,l=e.error,c=e.errorMessage,s=a?r.a.createElement(_,null):null,i=l?r.a.createElement(z,{message:c}):null;return r.a.createElement("div",{className:"random-block rounded"},r.a.createElement(M,{value:n}),s,i,r.a.createElement(G,{char:t}))}}]),t}(n.Component),G=function(e){var t=e.char,a=t.name,n=t.gender,l=t.born,c=t.died,s=t.culture,i=t.id;return r.a.createElement(r.a.Fragment,null,r.a.createElement("h4",null,a),r.a.createElement("ul",{className:"list-group list-group-flush"},r.a.createElement("li",{className:"list-group-item d-flex justify-content-between"},r.a.createElement("span",{className:"term"},"ID "),r.a.createElement("span",null,i)),r.a.createElement("li",{className:"list-group-item d-flex justify-content-between"},r.a.createElement("span",{className:"term"},"Gender "),r.a.createElement("span",null,n)),r.a.createElement("li",{className:"list-group-item d-flex justify-content-between"},r.a.createElement("span",{className:"term"},"Born "),r.a.createElement("span",null,l)),r.a.createElement("li",{className:"list-group-item d-flex justify-content-between"},r.a.createElement("span",{className:"term"},"Died "),r.a.createElement("span",null,c)),r.a.createElement("li",{className:"list-group-item d-flex justify-content-between"},r.a.createElement("span",{className:"term"},"Culture "),r.a.createElement("span",null,s))))};var H=F,J=(a(46),function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(o.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).gotService=new S,a.state={charList:[]},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.gotService.getAllCharacters().then(function(t){e.setState({charList:t})})}},{key:"renderItems",value:function(e){var t=this;return e.map(function(e,a){return r.a.createElement("li",{key:a,className:"list-group-item",onClick:function(){return t.props.onCharSelected(a+41)}},e.name)})}},{key:"render",value:function(){var e=this.state.charList,t=this.renderItems(e);return r.a.createElement("ul",{className:"item-list list-group"},e?null:r.a.createElement(_,null),t)}}]),t}(n.Component)),T=(a(48),function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(o.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).gotService=new S,a.state={char:null,loading:!1},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.updateChar()}},{key:"componentDidUpdate",value:function(e){this.props.charId!==e.charId&&this.updateChar()}},{key:"updateChar",value:function(){var e=this;this.setState({loading:!0});var t=this.props.charId;t&&(this.gotService.getCharacter(t).then(function(t){console.log("char",t),e.setState({char:t,loading:!1})}),this.foo.bar=0)}},{key:"render",value:function(){if(!this.state.char)return r.a.createElement("span",{className:"select-error"},"Prease select character");var e=this.state.char,t=e.name,a=e.gender,n=e.born,l=e.died,c=e.culture;return r.a.createElement("div",{className:"char-details rounded"},this.state.loading?r.a.createElement(_,null):null,r.a.createElement("h4",null,t),r.a.createElement("ul",{className:"list-group list-group-flush"},r.a.createElement("li",{className:"list-group-item d-flex justify-content-between"},r.a.createElement("span",{className:"term"},"Gender"),r.a.createElement("span",null,a)),r.a.createElement("li",{className:"list-group-item d-flex justify-content-between"},r.a.createElement("span",{className:"term"},"Born"),r.a.createElement("span",null,n)),r.a.createElement("li",{className:"list-group-item d-flex justify-content-between"},r.a.createElement("span",{className:"term"},"Died"),r.a.createElement("span",null,l)),r.a.createElement("li",{className:"list-group-item d-flex justify-content-between"},r.a.createElement("span",{className:"term"},"Culture"),r.a.createElement("span",null,c))))}}]),t}(n.Component)),U=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(o.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={randomCharActive:!0,selectedChar:null},a.toggleRandomChar=function(){console.log("toggleRandomChar"),a.setState({randomCharActive:!a.state.randomCharActive})},a.onCharSelected=function(e){a.setState({selectedChar:e})},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.state.randomCharActive?r.a.createElement(H,null):"";return r.a.createElement(r.a.Fragment,null,r.a.createElement(h.a,null,r.a.createElement(O,null)),r.a.createElement(h.a,null,r.a.createElement(d.a,null,r.a.createElement(p.a,{lg:{size:6,offset:0}},e,r.a.createElement(f.a,{color:"primary",onClick:this.toggleRandomChar},"Toggle radom char"))),r.a.createElement(d.a,null,r.a.createElement(p.a,{md:"6"},r.a.createElement(J,{onCharSelected:this.onCharSelected})),r.a.createElement(p.a,{md:"6"},r.a.createElement(T,{charId:this.state.selectedChar})))))}}]),t}(n.Component);a(51),a(53);c.a.render(r.a.createElement(U,null),document.getElementById("root"))}},[[27,2,1]]]);
//# sourceMappingURL=main.ad90151b.chunk.js.map